<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Fecha de Entrevista</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
  <script src="../libs/papaparse.min.js"></script>
  <script src="../js/citas.js" defer></script>
  <script src="https://unpkg.com/@panzoom/panzoom/dist/panzoom.min.js"></script>

  <style>
    body {
      font-family: 'Inter', sans-serif;
    }

    .modal-content {
      max-width: 95%;
      max-height: 95vh;
      overflow: hidden;
    }

    .zoom-container {
      max-height: 80vh;
      max-width: 100%;
      overflow: auto;
      border-radius: 0.5rem;
      background-color: #1f2937;
      padding: 0.5rem;
    }

    .zoom-container img {
      display: block;
      max-width: 100%;
      height: auto;
      cursor: grab;
      user-select: none;
    }

    @media (max-width: 640px) {
      .zoom-container {
        max-height: 70vh;
      }
    }
  </style>
</head>

<body class="bg-gray-900 text-white min-h-screen flex items-center justify-center px-4">
  <div class="bg-gray-800/60 backdrop-blur-sm shadow-xl rounded-2xl p-8 w-full max-w-lg text-center">

    <div class="mb-4 flex justify-between">
      <a href="/index.html" class="inline-flex items-center text-indigo-400 hover:text-indigo-300 font-semibold transition duration-300">
        <svg class="h-5 w-5 mr-2" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" />
        </svg>
        Regresar
      </a>
     
      <a href="#" id="openModal" class="inline-flex items-center text-indigo-400 hover:text-indigo-300 font-semibold transition transform hover:scale-110">
        
        <svg class="h-6 w-6 mr-2" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" d="M9 20l-5.447-2.724A2 2 0 013 15.382V5.618a2 2 0 011.553-1.947L9 1m0 0l6 3m-6-3v19m6-16l5.447 2.724A2 2 0 0121 8.618v9.764a2 2 0 01-1.553 1.947L15 23m0 0V4" />
        </svg>
        Ver Croquis
      </a>

    </div>

    <h1 class="text-3xl font-bold mb-6 text-indigo-400">Consulta tu Cita Psicológica</h1>

    <input type="text" id="dniInput" placeholder="Ingrese su DNI"
      class="w-full px-5 py-3 rounded-xl text-black mb-4 focus:outline-none focus:ring-2 focus:ring-indigo-400 placeholder-gray-500" />

    <button onclick="buscarCita()"
      class="w-full bg-indigo-500 hover:bg-indigo-600 text-white px-6 py-3 rounded-xl transition-all duration-300 font-semibold">
      Buscar
    </button>

    <div id="resultado" class="mt-6 text-left text-sm">
      <!-- Aquí se mostrarán los resultados de la búsqueda -->
    </div>

  </div>

  <!-- Modal con Scroll y Zoom -->
  <div id="modal"
    class="modal fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center hidden z-50 overflow-y-auto p-4">
    <div class="modal-content bg-gray-800 rounded-lg p-4 relative w-full max-w-5xl mx-auto">

      <button id="closeModal"
        class="absolute top-2 right-2 text-white font-bold text-2xl hover:text-red-400 transition">&times;</button>

      <!-- Contenedor Scroll y Zoom -->
      <div id="panzoom" class="zoom-container overflow-auto">
        <img id="croquisImage" src="/img/referencia1.jpg" alt="Croquis" />
      </div>

      <div class="text-center mt-4">
        <a id="downloadBtn" href="/img/referencia1.jpg" download
          class="inline-flex items-center bg-indigo-500 hover:bg-indigo-600 text-white px-4 py-2 rounded-lg font-semibold transition transform hover:scale-105 duration-300">
          <!-- Ícono de descarga -->
          <svg class="h-5 w-5 mr-2" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M4 16v2a2 2 0 002 2h12a2 2 0 002-2v-2M7 10l5 5 5-5M12 15V3" />
          </svg>
          Descargar Imagen
        </a>
      </div>


    </div>
  </div>

  <script>
    const modal = document.getElementById('modal');
    const openModal = document.getElementById('openModal');
    const closeModal = document.getElementById('closeModal');

    openModal.addEventListener('click', (e) => {
      e.preventDefault();
      modal.classList.remove('hidden');
      document.body.style.overflow = 'hidden';
    });

    closeModal.addEventListener('click', () => {
      modal.classList.add('hidden');
      document.body.style.overflow = 'auto';
    });

    modal.addEventListener('click', (e) => {
      if (e.target === modal) {
        modal.classList.add('hidden');
        document.body.style.overflow = 'auto';
      }
    });

    // Activar Panzoom
    document.addEventListener('DOMContentLoaded', () => {
      const panzoomElement = document.getElementById('panzoom');
      Panzoom(panzoomElement, {
        maxScale: 5,
        minScale: 1,
        contain: 'outside',
        step: 0.3
      });
    });
  </script>

</body>

</html>
